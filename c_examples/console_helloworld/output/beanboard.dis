start:
                    call      crt0_init                     ;[8000] cd 4a 80
                    ld        hl,$ffc0                      ;[8003] 21 c0 ff
                    add       hl,sp                         ;[8006] 39
                    ld        sp,hl                         ;[8007] f9
                    ld        (__exit_atexit_funcs),hl      ;[8008] 22 6d 88
                    call      _main                         ;[800b] cd 70 81
__Exit:
                    call      crt0_exit                     ;[800e] cd 72 80
                    jp        WARMSTART                     ;[8011] c3 10 00
l_dcal:
                    jp        (hl)                          ;[8014] e9
_fputc_cons:
                    pop       bc                            ;[8015] c1
                    pop       hl                            ;[8016] e1
                    push      hl                            ;[8017] e5
                    push      bc                            ;[8018] c5
                    ld        a,l                           ;[8019] 7d
                    call      putchar_beanboard             ;[801a] cd 45 00
                    ret                                     ;[801d] c9

_fgetc_cons:
                    call      getchar_beanboard             ;[801e] cd 23 00
                    ld        l,a                           ;[8021] 6f
                    ld        h,$00                         ;[8022] 26 00
                    ret                                     ;[8024] c9

_marvin_readchar:
                    call      readchar_beanboard            ;[8025] cd 2b 00
                    ld        h,$00                         ;[8028] 26 00
                    ld        l,a                           ;[802a] 6f
                    ret                                     ;[802b] c9

_marvin_lcd_putchar:
                    pop       bc                            ;[802c] c1
                    pop       hl                            ;[802d] e1
                    push      hl                            ;[802e] e5
                    push      bc                            ;[802f] c5
                    ld        a,l                           ;[8030] 7d
                    call      lcd_putchar_beanboard         ;[8031] cd 48 02
                    ret                                     ;[8034] c9

_marvin_lcd_putcmd:
                    pop       bc                            ;[8035] c1
                    pop       hl                            ;[8036] e1
                    push      hl                            ;[8037] e5
                    push      bc                            ;[8038] c5
                    ld        a,l                           ;[8039] 7d
                    call      lcd_putcmd_beanboard          ;[803a] cd 32 02
                    ret                                     ;[803d] c9

_marvin_lcd_init:
                    call      lcd_init_beanboard            ;[803e] cd 1b 02
                    ret                                     ;[8041] c9

_marvin_lcd_puts:
                    pop       bc                            ;[8042] c1
                    pop       hl                            ;[8043] e1
                    push      hl                            ;[8044] e5
                    push      bc                            ;[8045] c5
                    call      lcd_puts_beanboard            ;[8046] cd c3 02
                    ret                                     ;[8049] c9

crt0_init:
                    xor       a                             ;[804a] af
                    ld        hl,$8804                      ;[804b] 21 04 88
                    ld        bc,$006b                      ;[804e] 01 6b 00
                    ld        de,$8805                      ;[8051] 11 05 88
                    ld        (hl),a                        ;[8054] 77
                    ldir                                    ;[8055] ed b0
                    ld        hl,$8808                      ;[8057] 21 08 88
                    ld        (hl),$13                      ;[805a] 36 13
                    ld        hl,$8812                      ;[805c] 21 12 88
                    ld        (hl),$15                      ;[805f] 36 15
                    ld        hl,$881c                      ;[8061] 21 1c 88
                    ld        (hl),$15                      ;[8064] 36 15
                    ld        hl,$8804                      ;[8066] 21 04 88
                    ld        de,$886f                      ;[8069] 11 6f 88
                    ld        bc,$0001                      ;[806c] 01 01 00
                    ldir                                    ;[806f] ed b0
                    ret                                     ;[8071] c9

crt0_exit:
                    ret                                     ;[8072] c9

l_long_neg:
                    ld        a,l                           ;[8073] 7d
                    cpl                                     ;[8074] 2f
                    ld        l,a                           ;[8075] 6f
                    ld        a,h                           ;[8076] 7c
                    cpl                                     ;[8077] 2f
                    ld        h,a                           ;[8078] 67
                    ld        a,e                           ;[8079] 7b
                    cpl                                     ;[807a] 2f
                    ld        e,a                           ;[807b] 5f
                    ld        a,d                           ;[807c] 7a
                    cpl                                     ;[807d] 2f
                    ld        d,a                           ;[807e] 57
                    inc       l                             ;[807f] 2c
                    ret       nz                            ;[8080] c0
                    inc       h                             ;[8081] 24
                    ret       nz                            ;[8082] c0
                    inc       de                            ;[8083] 13
                    ret                                     ;[8084] c9

l_load_64_dehldehl_mbc:
                    call      again_l_load_64_dehldehl_mbc  ;[8085] cd 88 80
again_l_load_64_dehldehl_mbc:
                    ld        a,(bc)                        ;[8088] 0a
                    inc       bc                            ;[8089] 03
                    ld        l,a                           ;[808a] 6f
                    ld        a,(bc)                        ;[808b] 0a
                    inc       bc                            ;[808c] 03
                    ld        h,a                           ;[808d] 67
                    ld        a,(bc)                        ;[808e] 0a
                    inc       bc                            ;[808f] 03
                    ld        e,a                           ;[8090] 5f
                    ld        a,(bc)                        ;[8091] 0a
                    inc       bc                            ;[8092] 03
                    ld        d,a                           ;[8093] 57
                    push      bc                            ;[8094] c5
                    exx                                     ;[8095] d9
                    pop       bc                            ;[8096] c1
                    ret                                     ;[8097] c9

l_neg_64_mhl:
                    push      hl                            ;[8098] e5
                    call      l_cpl_64_mhl                  ;[8099] cd b4 80
                    pop       hl                            ;[809c] e1
                    inc       (hl)                          ;[809d] 34
                    ret       nz                            ;[809e] c0
                    inc       hl                            ;[809f] 23
                    inc       (hl)                          ;[80a0] 34
                    ret       nz                            ;[80a1] c0
                    inc       hl                            ;[80a2] 23
                    inc       (hl)                          ;[80a3] 34
                    ret       nz                            ;[80a4] c0
                    inc       hl                            ;[80a5] 23
                    inc       (hl)                          ;[80a6] 34
                    ret       nz                            ;[80a7] c0
                    inc       hl                            ;[80a8] 23
                    inc       (hl)                          ;[80a9] 34
                    ret       nz                            ;[80aa] c0
                    inc       hl                            ;[80ab] 23
                    inc       (hl)                          ;[80ac] 34
                    ret       nz                            ;[80ad] c0
                    inc       hl                            ;[80ae] 23
                    inc       (hl)                          ;[80af] 34
                    ret       nz                            ;[80b0] c0
                    inc       hl                            ;[80b1] 23
                    inc       (hl)                          ;[80b2] 34
                    ret                                     ;[80b3] c9

l_cpl_64_mhl:
                    call      again_l_cpl_64_mhl            ;[80b4] cd b7 80
again_l_cpl_64_mhl:
                    ld        a,(hl)                        ;[80b7] 7e
                    cpl                                     ;[80b8] 2f
                    ld        (hl),a                        ;[80b9] 77
                    inc       hl                            ;[80ba] 23
                    ld        a,(hl)                        ;[80bb] 7e
                    cpl                                     ;[80bc] 2f
                    ld        (hl),a                        ;[80bd] 77
                    inc       hl                            ;[80be] 23
                    ld        a,(hl)                        ;[80bf] 7e
                    cpl                                     ;[80c0] 2f
                    ld        (hl),a                        ;[80c1] 77
                    inc       hl                            ;[80c2] 23
                    ld        a,(hl)                        ;[80c3] 7e
                    cpl                                     ;[80c4] 2f
                    ld        (hl),a                        ;[80c5] 77
                    inc       hl                            ;[80c6] 23
                    ret                                     ;[80c7] c9

l_testzero_64_dehldehl:
                    exx                                     ;[80c8] d9
                    ld        a,d                           ;[80c9] 7a
                    or        e                             ;[80ca] b3
                    or        h                             ;[80cb] b4
                    or        l                             ;[80cc] b5
                    exx                                     ;[80cd] d9
                    or        d                             ;[80ce] b2
                    or        e                             ;[80cf] b3
                    or        h                             ;[80d0] b4
                    or        l                             ;[80d1] b5
                    ret                                     ;[80d2] c9

l_eat_sign:
                    ld        a,(hl)                        ;[80d3] 7e
                    inc       hl                            ;[80d4] 23
                    cp        $2b                           ;[80d5] fe 2b
                    ret       z                             ;[80d7] c8
                    cp        $2d                           ;[80d8] fe 2d
                    scf                                     ;[80da] 37
                    ret       z                             ;[80db] c8
                    dec       hl                            ;[80dc] 2b
                    or        a                             ;[80dd] b7
                    ret                                     ;[80de] c9

l_eat_ws:
                    ld        a,(hl)                        ;[80df] 7e
                    call      asm_isspace                   ;[80e0] cd a2 86
                    ret       c                             ;[80e3] d8
                    inc       hl                            ;[80e4] 23
                    jr        l_eat_ws                      ;[80e5] 18 f8
l_num2char:
                    cp        $0a                           ;[80e7] fe 0a
                    jr        nc,alpha                      ;[80e9] 30 03
                    add       $30                           ;[80eb] c6 30
                    ret                                     ;[80ed] c9

alpha:
                    add       $37                           ;[80ee] c6 37
                    ret                                     ;[80f0] c9

l_valid_base:
                    ld        a,b                           ;[80f1] 78
                    or        a                             ;[80f2] b7
                    ret       nz                            ;[80f3] c0
                    or        c                             ;[80f4] b1
                    ret       z                             ;[80f5] c8
                    ld        a,c                           ;[80f6] 79
                    cp        $25                           ;[80f7] fe 25
                    ret       nc                            ;[80f9] d0
                    cp        $02                           ;[80fa] fe 02
                    ccf                                     ;[80fc] 3f
                    ret                                     ;[80fd] c9

l_atou:
                    ld        hl,$0000                      ;[80fe] 21 00 00
                    dec       de                            ;[8101] 1b
                    push      hl                            ;[8102] e5
loop:
                    pop       af                            ;[8103] f1
                    inc       de                            ;[8104] 13
                    ld        a,(de)                        ;[8105] 1a
                    sub       $30                           ;[8106] d6 30
                    ccf                                     ;[8108] 3f
                    ret       nc                            ;[8109] d0
                    cp        $0a                           ;[810a] fe 0a
                    ret       nc                            ;[810c] d0
                    push      hl                            ;[810d] e5
                    add       hl,hl                         ;[810e] 29
                    jr        c,overflow_l_small_atou       ;[810f] 38 12
                    ld        c,l                           ;[8111] 4d
                    ld        b,h                           ;[8112] 44
                    add       hl,hl                         ;[8113] 29
                    jr        c,overflow_l_small_atou       ;[8114] 38 0d
                    add       hl,hl                         ;[8116] 29
                    jr        c,overflow_l_small_atou       ;[8117] 38 0a
                    add       hl,bc                         ;[8119] 09
                    jr        c,overflow_l_small_atou       ;[811a] 38 07
                    add       l                             ;[811c] 85
                    ld        l,a                           ;[811d] 6f
                    jr        nc,loop                       ;[811e] 30 e3
                    inc       h                             ;[8120] 24
                    jr        nz,loop                       ;[8121] 20 e0
overflow_l_small_atou:
                    pop       hl                            ;[8123] e1
                    scf                                     ;[8124] 37
                    ret                                     ;[8125] c9

l_neg_hl:
                    ld        a,l                           ;[8126] 7d
                    cpl                                     ;[8127] 2f
                    ld        l,a                           ;[8128] 6f
                    ld        a,h                           ;[8129] 7c
                    cpl                                     ;[812a] 2f
                    ld        h,a                           ;[812b] 67
                    inc       hl                            ;[812c] 23
                    ret                                     ;[812d] c9

l_long_mod_u:
                    and       a                             ;[812e] a7
                    jr        common                        ;[812f] 18 01
l_long_div_u:
                    scf                                     ;[8131] 37
common:
                    exx                                     ;[8132] d9
                    pop       bc                            ;[8133] c1
                    pop       hl                            ;[8134] e1
                    pop       de                            ;[8135] d1
                    push      bc                            ;[8136] c5
                    jp        c,$86ac                       ;[8137] da ac 86
                    call      $86ac                         ;[813a] cd ac 86
                    exx                                     ;[813d] d9
                    ret                                     ;[813e] c9

l_int2long_s:
                    ld        de,$0000                      ;[813f] 11 00 00
                    bit       7,h                           ;[8142] cb 7c
                    ret       z                             ;[8144] c8
                    dec       de                            ;[8145] 1b
                    ret                                     ;[8146] c9

l_ge:
                    ld        a,h                           ;[8147] 7c
                    add       $80                           ;[8148] c6 80
                    ld        b,a                           ;[814a] 47
                    ld        a,d                           ;[814b] 7a
                    add       $80                           ;[814c] c6 80
                    cp        b                             ;[814e] b8
                    ccf                                     ;[814f] 3f
                    jp        nz,l_compare_result           ;[8150] c2 59 81
                    ld        a,e                           ;[8153] 7b
                    cp        l                             ;[8154] bd
                    ccf                                     ;[8155] 3f
                    jp        l_compare_result              ;[8156] c3 59 81
l_compare_result:
                    ld        hl,$0000                      ;[8159] 21 00 00
                    ret       nc                            ;[815c] d0
                    inc       hl                            ;[815d] 23
                    ret                                     ;[815e] c9

l_jphl:
                    jp        (hl)                          ;[815f] e9
                    pop       hl                            ;[8160] e1
                    pop       hl                            ;[8161] e1
                    pop       hl                            ;[8162] e1
__printf_pickup_far:
                    ret                                     ;[8163] c9

l_uge:
                    ld        a,d                           ;[8164] 7a
                    cp        h                             ;[8165] bc
                    ccf                                     ;[8166] 3f
                    jp        nz,l_compare_result           ;[8167] c2 59 81
                    ld        a,e                           ;[816a] 7b
                    cp        l                             ;[816b] bd
                    ccf                                     ;[816c] 3f
                    jp        l_compare_result              ;[816d] c3 59 81
_main:
                    ld        hl,$87ab                      ;[8170] 21 ab 87
                    push      hl                            ;[8173] e5
                    ld        a,$01                         ;[8174] 3e 01
                    call      printf                        ;[8176] cd ab 82
                    pop       bc                            ;[8179] c1
                    ld        hl,$8806                      ;[817a] 21 06 88
                    push      hl                            ;[817d] e5
                    call      ___fgetc                      ;[817e] cd 83 81
                    pop       bc                            ;[8181] c1
                    ret                                     ;[8182] c9

___fgetc:
                    pop       bc                            ;[8183] c1
                    pop       hl                            ;[8184] e1
                    push      hl                            ;[8185] e5
                    push      bc                            ;[8186] c5
                    push      ix                            ;[8187] dd e5
                    push      hl                            ;[8189] e5
                    pop       ix                            ;[818a] dd e1
                    ld        a,(ix+$02)                    ;[818c] dd 7e 02
                    and       a                             ;[818f] a7
                    jp        z,is_eof                      ;[8190] ca 10 82
                    and       $08                           ;[8193] e6 08
                    jp        nz,is_eof                     ;[8195] c2 10 82
                    ld        a,(ix+$03)                    ;[8198] dd 7e 03
                    and       a                             ;[819b] a7
                    jr        z,no_ungetc                   ;[819c] 28 09
                    ld        l,a                           ;[819e] 6f
                    ld        h,$00                         ;[819f] 26 00
                    ld        (ix+$03),h                    ;[81a1] dd 74 03
                    jp        fgetc_end                     ;[81a4] c3 1b 82
no_ungetc:
                    ld        a,(ix+$02)                    ;[81a7] dd 7e 02
                    and       $80                           ;[81aa] e6 80
                    jr        z,no_string_stdio_fgetc_c     ;[81ac] 28 28
                    ld        l,(ix+$04)                    ;[81ae] dd 6e 04
                    ld        h,(ix+$05)                    ;[81b1] dd 66 05
                    ld        a,h                           ;[81b4] 7c
                    or        l                             ;[81b5] b5
                    jp        z,is_eof                      ;[81b6] ca 10 82
                    dec       hl                            ;[81b9] 2b
                    ld        (ix+$04),l                    ;[81ba] dd 75 04
                    ld        (ix+$05),h                    ;[81bd] dd 74 05
                    ld        l,(ix+$00)                    ;[81c0] dd 6e 00
                    ld        h,(ix+$01)                    ;[81c3] dd 66 01
                    ld        a,(hl)                        ;[81c6] 7e
                    inc       hl                            ;[81c7] 23
                    ld        (ix+$00),l                    ;[81c8] dd 75 00
                    ld        (ix+$01),h                    ;[81cb] dd 74 01
                    and       a                             ;[81ce] a7
                    jr        z,is_eof                      ;[81cf] 28 3f
                    ld        l,a                           ;[81d1] 6f
                    ld        h,$00                         ;[81d2] 26 00
                    jr        fgetc_end                     ;[81d4] 18 45
no_string_stdio_fgetc_c:
                    ld        a,(ix+$02)                    ;[81d6] dd 7e 02
                    and       $20                           ;[81d9] e6 20
                    jr        z,not_extra_fp                ;[81db] 28 0f
                    ld        l,(ix+$04)                    ;[81dd] dd 6e 04
                    ld        h,(ix+$05)                    ;[81e0] dd 66 05
                    ld        a,$01                         ;[81e3] 3e 01
                    call      l_jphl                        ;[81e5] cd 5f 81
                    jr        nc,fgetc_end                  ;[81e8] 30 31
                    jr        seteof                        ;[81ea] 18 27
not_extra_fp:
                    push      ix                            ;[81ec] dd e5
                    call      ___fchkstd                    ;[81ee] cd 1e 82
                    pop       ix                            ;[81f1] dd e1
                    jr        c,no_stdin                    ;[81f3] 38 0a
                    call      _fgetc_cons                   ;[81f5] cd 1e 80
                    push      hl                            ;[81f8] e5
                    call      _fputc_cons                   ;[81f9] cd 15 80
                    pop       hl                            ;[81fc] e1
                    jr        fgetc_end                     ;[81fd] 18 1c
no_stdin:
                    ld        l,(ix+$00)                    ;[81ff] dd 6e 00
                    ld        h,(ix+$01)                    ;[8202] dd 66 01
                    push      ix                            ;[8205] dd e5
                    call      _readbyte                     ;[8207] cd a0 86
                    pop       ix                            ;[820a] dd e1
                    ld        a,h                           ;[820c] 7c
                    inc       a                             ;[820d] 3c
                    jr        nz,fgetc_end                  ;[820e] 20 0b
is_eof:
                    ld        hl,$ffff                      ;[8210] 21 ff ff
seteof:
                    ld        a,(ix+$02)                    ;[8213] dd 7e 02
                    or        $08                           ;[8216] f6 08
                    ld        (ix+$02),a                    ;[8218] dd 77 02
fgetc_end:
                    pop       ix                            ;[821b] dd e1
                    ret                                     ;[821d] c9

___fchkstd:
                    pop       hl                            ;[821e] e1
                    pop       de                            ;[821f] d1
                    push      de                            ;[8220] d5
                    push      hl                            ;[8221] e5
                    ld        hl,$0000                      ;[8222] 21 00 00
                    inc       de                            ;[8225] 13
                    inc       de                            ;[8226] 13
                    ld        a,(de)                        ;[8227] 1a
                    and       $10                           ;[8228] e6 10
                    scf                                     ;[822a] 37
                    ret       z                             ;[822b] c8
                    dec       hl                            ;[822c] 2b
                    ld        a,(de)                        ;[822d] 1a
                    and       $02                           ;[822e] e6 02
                    ret       nz                            ;[8230] c0
                    inc       hl                            ;[8231] 23
                    inc       hl                            ;[8232] 23
                    and       a                             ;[8233] a7
                    ret                                     ;[8234] c9

_fputc_callee:
                    pop       de                            ;[8235] d1
                    pop       hl                            ;[8236] e1
                    pop       bc                            ;[8237] c1
                    push      de                            ;[8238] d5
                    push      ix                            ;[8239] dd e5
                    push      hl                            ;[823b] e5
                    pop       ix                            ;[823c] dd e1
                    call      asm_fputc_callee              ;[823e] cd 44 82
                    pop       ix                            ;[8241] dd e1
                    ret                                     ;[8243] c9

asm_fputc_callee:
                    ld        hl,$ffff                      ;[8244] 21 ff ff
                    ld        a,(ix+$02)                    ;[8247] dd 7e 02
                    and       a                             ;[824a] a7
                    ret       z                             ;[824b] c8
                    ld        a,(ix+$02)                    ;[824c] dd 7e 02
                    and       $80                           ;[824f] e6 80
                    jr        z,no_string_stdio_fputc_callee_c;[8251] 28 26
                    ld        e,(ix+$04)                    ;[8253] dd 5e 04
                    ld        d,(ix+$05)                    ;[8256] dd 56 05
                    ld        a,d                           ;[8259] 7a
                    or        e                             ;[825a] b3
                    jr        nz,print_char_to_buf          ;[825b] 20 03
                    ex        de,hl                         ;[825d] eb
                    dec       hl                            ;[825e] 2b
                    ret                                     ;[825f] c9

print_char_to_buf:
                    dec       de                            ;[8260] 1b
                    ld        (ix+$04),e                    ;[8261] dd 73 04
                    ld        (ix+$05),d                    ;[8264] dd 72 05
                    ld        l,(ix+$00)                    ;[8267] dd 6e 00
                    ld        h,(ix+$01)                    ;[826a] dd 66 01
                    ld        (hl),c                        ;[826d] 71
                    inc       hl                            ;[826e] 23
                    ld        (ix+$00),l                    ;[826f] dd 75 00
                    ld        (ix+$01),h                    ;[8272] dd 74 01
                    ld        l,c                           ;[8275] 69
                    ld        h,$00                         ;[8276] 26 00
                    ret                                     ;[8278] c9

no_string_stdio_fputc_callee_c:
                    ld        a,(ix+$02)                    ;[8279] dd 7e 02
                    and       $20                           ;[827c] e6 20
                    jr        z,no_net                      ;[827e] 28 0e
                    ld        l,(ix+$04)                    ;[8280] dd 6e 04
                    ld        h,(ix+$05)                    ;[8283] dd 66 05
                    ld        a,$02                         ;[8286] 3e 02
                    push      bc                            ;[8288] c5
                    call      l_jphl                        ;[8289] cd 5f 81
                    pop       hl                            ;[828c] e1
                    ret                                     ;[828d] c9

no_net:
                    push      ix                            ;[828e] dd e5
                    call      ___fchkstd                    ;[8290] cd 1e 82
                    pop       ix                            ;[8293] dd e1
                    jr        c,no_cons                     ;[8295] 38 06
                    push      bc                            ;[8297] c5
                    call      _fputc_cons                   ;[8298] cd 15 80
                    pop       hl                            ;[829b] e1
                    ret                                     ;[829c] c9

no_cons:
                    ld        l,(ix+$00)                    ;[829d] dd 6e 00
                    ld        h,(ix+$01)                    ;[82a0] dd 66 01
                    push      hl                            ;[82a3] e5
                    push      bc                            ;[82a4] c5
                    call      ___writebyte                  ;[82a5] cd a1 86
                    pop       hl                            ;[82a8] e1
                    pop       bc                            ;[82a9] c1
                    ret                                     ;[82aa] c9

printf:
                    ld        l,a                           ;[82ab] 6f
                    ld        h,$00                         ;[82ac] 26 00
                    add       hl,hl                         ;[82ae] 29
                    add       hl,sp                         ;[82af] 39
                    push      ix                            ;[82b0] dd e5
                    ld        bc,$8810                      ;[82b2] 01 10 88
                    push      bc                            ;[82b5] c5
                    ld        bc,$8235                      ;[82b6] 01 35 82
                    push      bc                            ;[82b9] c5
                    ld        bc,$0001                      ;[82ba] 01 01 00
                    push      bc                            ;[82bd] c5
                    ld        e,(hl)                        ;[82be] 5e
                    inc       hl                            ;[82bf] 23
                    ld        d,(hl)                        ;[82c0] 56
                    push      de                            ;[82c1] d5
                    dec       hl                            ;[82c2] 2b
                    dec       hl                            ;[82c3] 2b
                    dec       hl                            ;[82c4] 2b
                    push      hl                            ;[82c5] e5
                    call      asm_printf                    ;[82c6] cd d1 82
                    pop       bc                            ;[82c9] c1
                    pop       bc                            ;[82ca] c1
                    pop       bc                            ;[82cb] c1
                    pop       bc                            ;[82cc] c1
                    pop       bc                            ;[82cd] c1
                    pop       ix                            ;[82ce] dd e1
                    ret                                     ;[82d0] c9

asm_printf:
                    ld        ix,$0000                      ;[82d1] dd 21 00 00
                    add       ix,sp                         ;[82d5] dd 39
                    ld        hl,$ffb0                      ;[82d7] 21 b0 ff
                    add       hl,sp                         ;[82da] 39
                    ld        sp,hl                         ;[82db] f9
                    ld        e,(ix+$02)                    ;[82dc] dd 5e 02
                    ld        d,(ix+$03)                    ;[82df] dd 56 03
                    ld        l,(ix+$04)                    ;[82e2] dd 6e 04
                    ld        h,(ix+$05)                    ;[82e5] dd 66 05
                    xor       a                             ;[82e8] af
                    ld        (ix-$01),a                    ;[82e9] dd 77 ff
                    ld        (ix-$02),a                    ;[82ec] dd 77 fe
                    dec       a                             ;[82ef] 3d
                    ld        (ix-$05),a                    ;[82f0] dd 77 fb
                    ld        (ix-$06),a                    ;[82f3] dd 77 fa
                    ld        (ix-$07),a                    ;[82f6] dd 77 f9
                    ld        (ix-$08),a                    ;[82f9] dd 77 f8
__printf_loop:
                    ld        (ix-$09),$0a                  ;[82fc] dd 36 f7 0a
                    xor       a                             ;[8300] af
                    ld        (ix-$03),a                    ;[8301] dd 77 fd
                    ld        (ix-$04),a                    ;[8304] dd 77 fc
                    ld        (ix-$0a),a                    ;[8307] dd 77 f6
                    ld        a,(hl)                        ;[830a] 7e
                    inc       hl                            ;[830b] 23
                    and       a                             ;[830c] a7
                    jr        nz,cont                       ;[830d] 20 07
                    ld        hl,$004e                      ;[830f] 21 4e 00
                    add       hl,sp                         ;[8312] 39
                    ld        sp,hl                         ;[8313] f9
                    pop       hl                            ;[8314] e1
__printf_get_flags_noop:
                    ret                                     ;[8315] c9

cont:
                    cp        $25                           ;[8316] fe 25
                    jr        z,handle_percent              ;[8318] 28 05
print_format_character:
                    call      __printf_doprint              ;[831a] cd 62 83
                    jr        __printf_loop                 ;[831d] 18 dd
handle_percent:
                    ld        a,(hl)                        ;[831f] 7e
                    inc       hl                            ;[8320] 23
                    cp        $25                           ;[8321] fe 25
                    jr        z,print_format_character      ;[8323] 28 f5
                    call      __printf_get_flags            ;[8325] cd 99 83
                    res       6,(ix-$04)                    ;[8328] dd cb fc b6
                    cp        $7a                           ;[832c] fe 7a
                    jr        z,get_next_char               ;[832e] 28 14
                    cp        $68                           ;[8330] fe 68
                    jr        nz,check_long_qualifier       ;[8332] 20 08
                    ld        a,(hl)                        ;[8334] 7e
                    inc       hl                            ;[8335] 23
                    cp        $68                           ;[8336] fe 68
                    jr        nz,no_long_qualifier          ;[8338] 20 0c
                    jr        get_next_char                 ;[833a] 18 08
check_long_qualifier:
                    cp        $6c                           ;[833c] fe 6c
                    jr        nz,no_long_qualifier          ;[833e] 20 06
                    set       6,(ix-$04)                    ;[8340] dd cb fc f6
get_next_char:
                    ld        a,(hl)                        ;[8344] 7e
                    inc       hl                            ;[8345] 23
no_long_qualifier:
                    push      hl                            ;[8346] e5
                    ld        hl,$87c8                      ;[8347] 21 c8 87
                    ld        c,a                           ;[834a] 4f
__printf_format_search_loop:
                    ld        a,(hl)                        ;[834b] 7e
                    and       a                             ;[834c] a7
                    jr        z,no_format_found             ;[834d] 28 0f
                    cp        c                             ;[834f] b9
                    jr        nz,no_format_match            ;[8350] 20 07
                    inc       hl                            ;[8352] 23
                    ld        c,(hl)                        ;[8353] 4e
                    inc       hl                            ;[8354] 23
                    ld        b,(hl)                        ;[8355] 46
                    pop       hl                            ;[8356] e1
                    push      bc                            ;[8357] c5
                    ret                                     ;[8358] c9

no_format_match:
                    inc       hl                            ;[8359] 23
                    inc       hl                            ;[835a] 23
                    inc       hl                            ;[835b] 23
                    jr        __printf_format_search_loop   ;[835c] 18 ed
no_format_found:
                    pop       hl                            ;[835e] e1
                    ld        a,c                           ;[835f] 79
                    jr        print_format_character        ;[8360] 18 b8
__printf_doprint:
                    push      hl                            ;[8362] e5
                    push      de                            ;[8363] d5
                    push      bc                            ;[8364] c5
                    push      ix                            ;[8365] dd e5
                    exx                                     ;[8367] d9
                    push      bc                            ;[8368] c5
                    push      de                            ;[8369] d5
                    exx                                     ;[836a] d9
                    ex        af,af'                        ;[836b] 08
                    push      af                            ;[836c] f5
                    ex        af,af'                        ;[836d] 08
                    inc       (ix-$02)                      ;[836e] dd 34 fe
                    jr        nz,no_inc                     ;[8371] 20 03
                    inc       (ix-$01)                      ;[8373] dd 34 ff
no_inc:
                    ld        c,a                           ;[8376] 4f
                    ld        b,$00                         ;[8377] 06 00
                    push      bc                            ;[8379] c5
                    ld        c,(ix+$0a)                    ;[837a] dd 4e 0a
                    ld        b,(ix+$0b)                    ;[837d] dd 46 0b
                    push      bc                            ;[8380] c5
                    ld        bc,$838c                      ;[8381] 01 8c 83
                    push      bc                            ;[8384] c5
                    ld        l,(ix+$08)                    ;[8385] dd 6e 08
                    ld        h,(ix+$09)                    ;[8388] dd 66 09
                    jp        (hl)                          ;[838b] e9
doprint_return:
                    ex        af,af'                        ;[838c] 08
                    pop       af                            ;[838d] f1
                    ex        af,af'                        ;[838e] 08
                    exx                                     ;[838f] d9
                    pop       de                            ;[8390] d1
                    pop       bc                            ;[8391] c1
                    exx                                     ;[8392] d9
                    pop       ix                            ;[8393] dd e1
                    pop       bc                            ;[8395] c1
                    pop       de                            ;[8396] d1
                    pop       hl                            ;[8397] e1
                    ret                                     ;[8398] c9

__printf_get_flags:
                    ld        c,$00                         ;[8399] 0e 00
flags_again:
                    push      hl                            ;[839b] e5
                    ld        b,$05                         ;[839c] 06 05
                    ld        hl,$83ad                      ;[839e] 21 ad 83
flag_loop:
                    cp        (hl)                          ;[83a1] be
                    inc       hl                            ;[83a2] 23
                    jr        nz,no_flag                    ;[83a3] 20 12
                    ld        a,(hl)                        ;[83a5] 7e
                    or        c                             ;[83a6] b1
                    ld        c,a                           ;[83a7] 4f
                    pop       hl                            ;[83a8] e1
                    ld        a,(hl)                        ;[83a9] 7e
                    inc       hl                            ;[83aa] 23
                    jr        flags_again                   ;[83ab] 18 ee
flags:
                    dec       l                             ;[83ad] 2d
                    ld        bc,$022b                      ;[83ae] 01 2b 02
                    jr        nz,$83bb                      ;[83b1] 20 08
                    inc       hl                            ;[83b3] 23
                    djnz      $83e6                         ;[83b4] 10 30
                    inc       b                             ;[83b6] 04
no_flag:
                    inc       hl                            ;[83b7] 23
                    djnz      flag_loop                     ;[83b8] 10 e7
                    pop       hl                            ;[83ba] e1
                    ld        (ix-$04),c                    ;[83bb] dd 71 fc
check_width:
                    ld        (ix-$05),$00                  ;[83be] dd 36 fb 00
                    ld        (ix-$06),$00                  ;[83c2] dd 36 fa 00
                    cp        $2a                           ;[83c6] fe 2a
                    jr        nz,check_width_from_format    ;[83c8] 20 08
starred_width:
                    push      hl                            ;[83ca] e5
                    call      get_16bit_ap_parameter        ;[83cb] cd 73 86
                    ex        de,hl                         ;[83ce] eb
                    ex        (sp),hl                       ;[83cf] e3
                    jr        save_width                    ;[83d0] 18 0e
check_width_from_format:
                    cp        $30                           ;[83d2] fe 30
                    jr        c,check_precision             ;[83d4] 38 13
                    cp        $3a                           ;[83d6] fe 3a
                    jr        nc,check_precision            ;[83d8] 30 0f
                    push      de                            ;[83da] d5
                    dec       hl                            ;[83db] 2b
                    call      asm_atoi                      ;[83dc] cd 5a 87
                    ex        de,hl                         ;[83df] eb
save_width:
                    ld        (ix-$05),d                    ;[83e0] dd 72 fb
                    ld        (ix-$06),e                    ;[83e3] dd 73 fa
                    pop       de                            ;[83e6] d1
                    ld        a,(hl)                        ;[83e7] 7e
                    inc       hl                            ;[83e8] 23
check_precision:
                    ld        (ix-$07),$ff                  ;[83e9] dd 36 f9 ff
                    ld        (ix-$08),$ff                  ;[83ed] dd 36 f8 ff
                    cp        $2e                           ;[83f1] fe 2e
                    jr        nz,no_precision               ;[83f3] 20 1c
                    ld        a,(hl)                        ;[83f5] 7e
                    cp        $2a                           ;[83f6] fe 2a
                    jr        nz,check_precision_from_format;[83f8] 20 09
                    inc       hl                            ;[83fa] 23
                    push      hl                            ;[83fb] e5
                    call      get_16bit_ap_parameter        ;[83fc] cd 73 86
                    ex        de,hl                         ;[83ff] eb
                    ex        (sp),hl                       ;[8400] e3
                    jr        save_precision                ;[8401] 18 05
check_precision_from_format:
                    push      de                            ;[8403] d5
                    call      asm_atoi                      ;[8404] cd 5a 87
                    ex        de,hl                         ;[8407] eb
save_precision:
                    ld        (ix-$07),d                    ;[8408] dd 72 f9
                    ld        (ix-$08),e                    ;[840b] dd 73 f8
                    ld        a,(hl)                        ;[840e] 7e
                    inc       hl                            ;[840f] 23
                    pop       de                            ;[8410] d1
no_precision:
                    ret                                     ;[8411] c9

__printf_handle_B:
                    ld        (ix-$09),$02                  ;[8412] dd 36 f7 02
                    res       1,(ix-$04)                    ;[8416] dd cb fc 8e
                    ld        c,$00                         ;[841a] 0e 00
                    jp        __printf_number               ;[841c] c3 dc 84
__printf_handle_X:
                    ld        (ix-$09),$10                  ;[841f] dd 36 f7 10
                    ld        (ix-$03),$e0                  ;[8423] dd 36 fd e0
                    res       1,(ix-$04)                    ;[8427] dd cb fc 8e
                    ld        c,$00                         ;[842b] 0e 00
                    jp        __printf_number               ;[842d] c3 dc 84
__printf_handle_c:
                    push      hl                            ;[8430] e5
                    call      get_16bit_ap_parameter        ;[8431] cd 73 86
                    push      de                            ;[8434] d5
                    ld        a,l                           ;[8435] 7d
                    call      __printf_print_to_buf         ;[8436] cd 61 86
                    jp        __printf_print_the_buffer     ;[8439] c3 4f 86
__printf_handle_d:
                    ld        c,$01                         ;[843c] 0e 01
                    jp        __printf_number               ;[843e] c3 dc 84
__printf_handle_ll:
                    ld        c,(hl)                        ;[8441] 4e
                    inc       hl                            ;[8442] 23
                    push      hl                            ;[8443] e5
                    ld        hl,$87ea                      ;[8444] 21 ea 87
                    jp        __printf_format_search_loop   ;[8447] c3 4b 83
__printf_handle_llB:
                    ld        c,$00                         ;[844a] 0e 00
                    ld        (ix-$09),$02                  ;[844c] dd 36 f7 02
                    res       1,(ix-$04)                    ;[8450] dd cb fc 8e
                    jp        __printf_number64             ;[8454] c3 76 85
__printf_handle_llX:
                    ld        c,$00                         ;[8457] 0e 00
                    ld        (ix-$09),$10                  ;[8459] dd 36 f7 10
                    ld        (ix-$03),$e0                  ;[845d] dd 36 fd e0
                    res       1,(ix-$04)                    ;[8461] dd cb fc 8e
                    jp        __printf_number64             ;[8465] c3 76 85
__printf_handle_lld:
                    ld        c,$01                         ;[8468] 0e 01
                    jp        __printf_number64             ;[846a] c3 76 85
__printf_handle_llo:
                    ld        c,$00                         ;[846d] 0e 00
                    ld        (ix-$09),$08                  ;[846f] dd 36 f7 08
                    jp        __printf_number64             ;[8473] c3 76 85
__printf_handle_llu:
                    ld        c,$00                         ;[8476] 0e 00
                    jp        __printf_number64             ;[8478] c3 76 85
__printf_handle_llx:
                    ld        c,$00                         ;[847b] 0e 00
                    ld        (ix-$09),$10                  ;[847d] dd 36 f7 10
                    res       1,(ix-$04)                    ;[8481] dd cb fc 8e
                    jp        __printf_number64             ;[8485] c3 76 85
__printf_handle_n:
                    push      hl                            ;[8488] e5
                    call      get_16bit_ap_parameter        ;[8489] cd 73 86
                    ld        a,(ix-$02)                    ;[848c] dd 7e fe
                    ld        (hl),a                        ;[848f] 77
                    ld        a,(ix-$01)                    ;[8490] dd 7e ff
                    inc       hl                            ;[8493] 23
                    ld        (hl),a                        ;[8494] 77
                    pop       hl                            ;[8495] e1
                    jp        __printf_loop                 ;[8496] c3 fc 82
__printf_handle_o:
                    ld        (ix-$09),$08                  ;[8499] dd 36 f7 08
                    ld        c,$00                         ;[849d] 0e 00
                    jp        __printf_number               ;[849f] c3 dc 84
__printf_handle_s:
                    push      hl                            ;[84a2] e5
                    call      get_16bit_ap_parameter        ;[84a3] cd 73 86
                    push      de                            ;[84a6] d5
                    ld        a,h                           ;[84a7] 7c
                    or        l                             ;[84a8] b5
                    jr        nz,printstr                   ;[84a9] 20 03
                    ld        hl,$87fd                      ;[84ab] 21 fd 87
printstr:
                    push      hl                            ;[84ae] e5
                    call      asm_strlen                    ;[84af] cd a0 87
                    ex        de,hl                         ;[84b2] eb
                    ld        l,(ix-$08)                    ;[84b3] dd 6e f8
                    ld        h,(ix-$07)                    ;[84b6] dd 66 f9
                    push      hl                            ;[84b9] e5
                    call      l_uge                         ;[84ba] cd 64 81
                    pop       hl                            ;[84bd] e1
                    jr        nc,use_strlen                 ;[84be] 30 01
                    ex        de,hl                         ;[84c0] eb
use_strlen:
                    pop       bc                            ;[84c1] c1
                    call      __printf_print_aligned        ;[84c2] cd fe 85
printstr_end:
                    pop       de                            ;[84c5] d1
                    pop       hl                            ;[84c6] e1
                    jp        __printf_loop                 ;[84c7] c3 fc 82
__printf_handle_u:
                    ld        c,$00                         ;[84ca] 0e 00
                    jp        __printf_number               ;[84cc] c3 dc 84
__printf_handle_p:
                    ld        (ix-$09),$10                  ;[84cf] dd 36 f7 10
                    res       1,(ix-$04)                    ;[84d3] dd cb fc 8e
                    ld        c,$00                         ;[84d7] 0e 00
                    jp        __printf_number               ;[84d9] c3 dc 84
__printf_number:
                    push      hl                            ;[84dc] e5
                    bit       6,(ix-$04)                    ;[84dd] dd cb fc 76
                    jr        z,printf_number16             ;[84e1] 28 08
                    call      get_32bit_ap_parameter        ;[84e3] cd 84 86
printlong:
                    push      hl                            ;[84e6] e5
                    ld        l,a                           ;[84e7] 6f
                    ld        h,b                           ;[84e8] 60
                    jr        miniprintn                    ;[84e9] 18 0c
printf_number16:
                    call      get_16bit_ap_parameter        ;[84eb] cd 73 86
                    push      de                            ;[84ee] d5
                    ld        de,$0000                      ;[84ef] 11 00 00
                    ld        a,c                           ;[84f2] 79
                    and       a                             ;[84f3] a7
                    call      nz,l_int2long_s               ;[84f4] c4 3f 81
miniprintn:
                    ld        b,a                           ;[84f7] 47
                    ld        a,d                           ;[84f8] 7a
                    rlca                                    ;[84f9] 07
                    and       $01                           ;[84fa] e6 01
                    and       b                             ;[84fc] a0
                    jr        z,noneg___printf_number       ;[84fd] 28 0a
                    call      l_long_neg                    ;[84ff] cd 73 80
                    ld        a,$2d                         ;[8502] 3e 2d
printsign___printf_number:
                    call      __printf_print_to_buf         ;[8504] cd 61 86
                    jr        miniprintn_start_process      ;[8507] 18 30
noneg___printf_number:
                    ld        a,$20                         ;[8509] 3e 20
                    bit       3,(ix-$04)                    ;[850b] dd cb fc 5e
                    jr        nz,printsign___printf_number  ;[850f] 20 f3
                    ld        a,$2b                         ;[8511] 3e 2b
                    bit       1,(ix-$04)                    ;[8513] dd cb fc 4e
                    jr        nz,printsign___printf_number  ;[8517] 20 eb
                    bit       4,(ix-$04)                    ;[8519] dd cb fc 66
                    jr        z,miniprintn_start_process    ;[851d] 28 1a
                    ld        a,(ix-$09)                    ;[851f] dd 7e f7
                    cp        $0a                           ;[8522] fe 0a
                    jr        z,miniprintn_start_process    ;[8524] 28 13
                    push      af                            ;[8526] f5
                    ld        a,$30                         ;[8527] 3e 30
                    call      __printf_print_to_buf         ;[8529] cd 61 86
                    pop       af                            ;[852c] f1
                    cp        $10                           ;[852d] fe 10
                    jr        nz,miniprintn_start_process   ;[852f] 20 08
                    ld        a,$78                         ;[8531] 3e 78
                    add       (ix-$03)                      ;[8533] dd 86 fd
                    call      __printf_print_to_buf         ;[8536] cd 61 86
miniprintn_start_process:
                    xor       a                             ;[8539] af
                    push      af                            ;[853a] f5
divloop:
                    push      de                            ;[853b] d5
                    push      hl                            ;[853c] e5
                    ld        l,(ix-$09)                    ;[853d] dd 6e f7
                    ld        h,$00                         ;[8540] 26 00
                    ld        d,h                           ;[8542] 54
                    ld        e,h                           ;[8543] 5c
                    call      l_long_div_u                  ;[8544] cd 31 81
                    exx                                     ;[8547] d9
                    ld        a,l                           ;[8548] 7d
                    cp        $ff                           ;[8549] fe ff
                    push      af                            ;[854b] f5
                    exx                                     ;[854c] d9
                    ld        a,h                           ;[854d] 7c
                    or        d                             ;[854e] b2
                    or        e                             ;[854f] b3
                    or        l                             ;[8550] b5
                    jr        nz,divloop                    ;[8551] 20 e8
printloop:
                    pop       af                            ;[8553] f1
                    jp        z,__printf_print_the_buffer   ;[8554] ca 4f 86
                    add       $30                           ;[8557] c6 30
                    cp        $3a                           ;[8559] fe 3a
                    jr        c,printloop1                  ;[855b] 38 05
                    add       $27                           ;[855d] c6 27
                    add       (ix-$03)                      ;[855f] dd 86 fd
printloop1:
                    call      __printf_print_to_buf         ;[8562] cd 61 86
                    jr        printloop                     ;[8565] 18 ec
pickup_sccz80_llong:
                    dec       de                            ;[8567] 1b
                    dec       de                            ;[8568] 1b
                    dec       de                            ;[8569] 1b
                    dec       de                            ;[856a] 1b
                    dec       de                            ;[856b] 1b
                    dec       de                            ;[856c] 1b
                    dec       de                            ;[856d] 1b
                    dec       de                            ;[856e] 1b
                    push      de                            ;[856f] d5
                    inc       de                            ;[8570] 13
                    inc       de                            ;[8571] 13
                    ld        l,e                           ;[8572] 6b
                    ld        h,d                           ;[8573] 62
                    jr        continue                      ;[8574] 18 13
__printf_number64:
                    push      hl                            ;[8576] e5
                    bit       0,(ix+$06)                    ;[8577] dd cb 06 46
                    jr        nz,pickup_sccz80_llong        ;[857b] 20 ea
                    ld        l,e                           ;[857d] 6b
                    ld        h,d                           ;[857e] 62
                    inc       hl                            ;[857f] 23
                    inc       hl                            ;[8580] 23
                    inc       hl                            ;[8581] 23
                    inc       hl                            ;[8582] 23
                    inc       hl                            ;[8583] 23
                    inc       hl                            ;[8584] 23
                    inc       hl                            ;[8585] 23
                    inc       hl                            ;[8586] 23
                    push      hl                            ;[8587] e5
                    ex        de,hl                         ;[8588] eb
continue:
                    push      hl                            ;[8589] e5
                    ld        a,c                           ;[858a] 79
                    and       a                             ;[858b] a7
                    jr        z,noneg___printf_number64     ;[858c] 28 0e
                    bit       7,(hl)                        ;[858e] cb 7e
                    jr        z,noneg___printf_number64     ;[8590] 28 0a
                    call      l_neg_64_mhl                  ;[8592] cd 98 80
                    ld        a,$2d                         ;[8595] 3e 2d
printsign___printf_number64:
                    call      __printf_print_to_buf         ;[8597] cd 61 86
                    jr        number64_start_process        ;[859a] 18 30
noneg___printf_number64:
                    ld        a,$20                         ;[859c] 3e 20
                    bit       3,(ix-$04)                    ;[859e] dd cb fc 5e
                    jr        nz,printsign___printf_number64;[85a2] 20 f3
                    ld        a,$2b                         ;[85a4] 3e 2b
                    bit       1,(ix-$04)                    ;[85a6] dd cb fc 4e
                    jr        nz,printsign___printf_number64;[85aa] 20 eb
                    bit       4,(ix-$04)                    ;[85ac] dd cb fc 66
                    jr        z,number64_start_process      ;[85b0] 28 1a
                    ld        a,(ix-$09)                    ;[85b2] dd 7e f7
                    cp        $0a                           ;[85b5] fe 0a
                    jr        z,number64_start_process      ;[85b7] 28 13
                    push      af                            ;[85b9] f5
                    ld        a,$30                         ;[85ba] 3e 30
                    call      __printf_print_to_buf         ;[85bc] cd 61 86
                    pop       af                            ;[85bf] f1
                    cp        $10                           ;[85c0] fe 10
                    jr        nz,number64_start_process     ;[85c2] 20 08
                    ld        a,$78                         ;[85c4] 3e 78
                    add       (ix-$03)                      ;[85c6] dd 86 fd
                    call      __printf_print_to_buf         ;[85c9] cd 61 86
number64_start_process:
                    call      __printf_get_buffer_address   ;[85cc] cd f6 85
                    ld        c,(ix-$0a)                    ;[85cf] dd 4e f6
                    ld        b,$00                         ;[85d2] 06 00
                    add       hl,bc                         ;[85d4] 09
                    ld        e,(ix-$09)                    ;[85d5] dd 5e f7
                    ld        d,$00                         ;[85d8] 16 00
                    pop       bc                            ;[85da] c1
                    push      ix                            ;[85db] dd e5
                    push      de                            ;[85dd] d5
                    push      hl                            ;[85de] e5
                    call      l_load_64_dehldehl_mbc        ;[85df] cd 85 80
                    pop       ix                            ;[85e2] dd e1
                    pop       bc                            ;[85e4] c1
                    call      asm1_ulltoa                   ;[85e5] cd 85 87
                    pop       ix                            ;[85e8] dd e1
                    call      __printf_get_buffer_address   ;[85ea] cd f6 85
                    call      asm_strlen                    ;[85ed] cd a0 87
                    ld        (ix-$0a),l                    ;[85f0] dd 75 f6
                    jp        __printf_print_the_buffer     ;[85f3] c3 4f 86
__printf_get_buffer_address:
                    push      ix                            ;[85f6] dd e5
                    pop       hl                            ;[85f8] e1
                    ld        bc,$ffb0                      ;[85f9] 01 b0 ff
                    add       hl,bc                         ;[85fc] 09
                    ret                                     ;[85fd] c9

__printf_print_aligned:
                    ld        l,(ix-$06)                    ;[85fe] dd 6e fa
                    ld        h,(ix-$05)                    ;[8601] dd 66 fb
                    ld        a,h                           ;[8604] 7c
                    or        l                             ;[8605] b5
                    jr        z,width_done                  ;[8606] 28 11
                    push      hl                            ;[8608] e5
                    push      bc                            ;[8609] c5
                    call      l_ge                          ;[860a] cd 47 81
                    pop       bc                            ;[860d] c1
                    pop       hl                            ;[860e] e1
                    jr        nc,adjust_width               ;[860f] 30 05
                    ld        hl,$0000                      ;[8611] 21 00 00
                    jr        width_done                    ;[8614] 18 03
adjust_width:
                    and       a                             ;[8616] a7
                    sbc       hl,de                         ;[8617] ed 52
width_done:
                    bit       0,(ix-$04)                    ;[8619] dd cb fc 46
                    push      bc                            ;[861d] c5
                    call      z,print_padding               ;[861e] cc 43 86
                    pop       bc                            ;[8621] c1
print_buffer:
                    ld        a,d                           ;[8622] 7a
                    or        e                             ;[8623] b3
                    jr        z,buffer_done                 ;[8624] 28 0f
                    ld        a,(bc)                        ;[8626] 0a
                    bit       7,(ix-$04)                    ;[8627] dd cb fc 7e
                    call      nz,__printf_pickup_far        ;[862b] c4 63 81
                    call      __printf_doprint              ;[862e] cd 62 83
                    inc       bc                            ;[8631] 03
                    dec       de                            ;[8632] 1b
                    jr        print_buffer                  ;[8633] 18 ed
buffer_done:
                    ld        c,$20                         ;[8635] 0e 20
print_padding_loop:
                    ld        a,h                           ;[8637] 7c
                    or        l                             ;[8638] b5
                    ret       z                             ;[8639] c8
                    push      bc                            ;[863a] c5
                    ld        a,c                           ;[863b] 79
                    call      __printf_doprint              ;[863c] cd 62 83
                    pop       bc                            ;[863f] c1
                    dec       hl                            ;[8640] 2b
                    jr        print_padding                 ;[8641] 18 00
print_padding:
                    ld        c,$20                         ;[8643] 0e 20
                    bit       2,(ix-$04)                    ;[8645] dd cb fc 56
                    jr        z,print_padding_loop          ;[8649] 28 ec
                    ld        c,$30                         ;[864b] 0e 30
                    jr        print_padding_loop            ;[864d] 18 e8
__printf_print_the_buffer:
                    ld        d,$00                         ;[864f] 16 00
                    ld        e,(ix-$0a)                    ;[8651] dd 5e f6
                    call      __printf_get_buffer_address   ;[8654] cd f6 85
                    ld        c,l                           ;[8657] 4d
                    ld        b,h                           ;[8658] 44
                    call      __printf_print_aligned        ;[8659] cd fe 85
                    pop       de                            ;[865c] d1
                    pop       hl                            ;[865d] e1
                    jp        __printf_loop                 ;[865e] c3 fc 82
__printf_print_to_buf:
                    push      hl                            ;[8661] e5
                    push      bc                            ;[8662] c5
                    call      __printf_get_buffer_address   ;[8663] cd f6 85
                    ld        c,(ix-$0a)                    ;[8666] dd 4e f6
                    ld        b,$00                         ;[8669] 06 00
                    add       hl,bc                         ;[866b] 09
                    inc       (ix-$0a)                      ;[866c] dd 34 f6
                    ld        (hl),a                        ;[866f] 77
                    pop       bc                            ;[8670] c1
                    pop       hl                            ;[8671] e1
                    ret                                     ;[8672] c9

get_16bit_ap_parameter:
                    ex        de,hl                         ;[8673] eb
                    ld        e,(hl)                        ;[8674] 5e
                    inc       hl                            ;[8675] 23
                    ld        d,(hl)                        ;[8676] 56
                    ex        de,hl                         ;[8677] eb
                    bit       0,(ix+$06)                    ;[8678] dd cb 06 46
                    jr        nz,change_ap_decrement        ;[867c] 20 02
                    inc       de                            ;[867e] 13
                    ret                                     ;[867f] c9

change_ap_decrement:
                    dec       de                            ;[8680] 1b
                    dec       de                            ;[8681] 1b
                    dec       de                            ;[8682] 1b
                    ret                                     ;[8683] c9

get_32bit_ap_parameter:
                    bit       0,(ix+$06)                    ;[8684] dd cb 06 46
                    jr        nz,pickuplong_sccz80          ;[8688] 20 0a
                    ex        de,hl                         ;[868a] eb
                    ld        a,(hl)                        ;[868b] 7e
                    inc       hl                            ;[868c] 23
                    ld        b,(hl)                        ;[868d] 46
                    inc       hl                            ;[868e] 23
                    ld        e,(hl)                        ;[868f] 5e
                    inc       hl                            ;[8690] 23
                    ld        d,(hl)                        ;[8691] 56
                    inc       hl                            ;[8692] 23
                    ret                                     ;[8693] c9

pickuplong_sccz80:
                    ex        de,hl                         ;[8694] eb
                    ld        e,(hl)                        ;[8695] 5e
                    inc       hl                            ;[8696] 23
                    ld        d,(hl)                        ;[8697] 56
                    dec       hl                            ;[8698] 2b
                    dec       hl                            ;[8699] 2b
                    ld        b,(hl)                        ;[869a] 46
                    dec       hl                            ;[869b] 2b
                    ld        a,(hl)                        ;[869c] 7e
                    dec       hl                            ;[869d] 2b
                    dec       hl                            ;[869e] 2b
                    ret                                     ;[869f] c9

_readbyte:
                    ret                                     ;[86a0] c9

___writebyte:
                    ret                                     ;[86a1] c9

asm_isspace:
                    cp        $20                           ;[86a2] fe 20
                    ret       z                             ;[86a4] c8
                    cp        $09                           ;[86a5] fe 09
                    ret       c                             ;[86a7] d8
                    cp        $0e                           ;[86a8] fe 0e
                    ccf                                     ;[86aa] 3f
                    ret                                     ;[86ab] c9

                    exx                                     ;[86ac] d9
l_divu_32_32x32:
                    ld        a,d                           ;[86ad] 7a
                    or        e                             ;[86ae] b3
                    or        h                             ;[86af] b4
                    or        l                             ;[86b0] b5
                    jr        z,divide_zero                 ;[86b1] 28 42
l0_divu_32_32x32:
                    xor       a                             ;[86b3] af
                    push      hl                            ;[86b4] e5
                    exx                                     ;[86b5] d9
                    ld        b,h                           ;[86b6] 44
                    ld        c,l                           ;[86b7] 4d
                    pop       hl                            ;[86b8] e1
                    push      de                            ;[86b9] d5
                    ex        de,hl                         ;[86ba] eb
                    ld        l,a                           ;[86bb] 6f
                    ld        h,a                           ;[86bc] 67
                    exx                                     ;[86bd] d9
                    pop       bc                            ;[86be] c1
                    ld        l,a                           ;[86bf] 6f
                    ld        h,a                           ;[86c0] 67
l1_small_divu_32_32x32:
                    ld        a,b                           ;[86c1] 78
                    ld        b,$20                         ;[86c2] 06 20
loop_0:
                    exx                                     ;[86c4] d9
                    rl        c                             ;[86c5] cb 11
                    rl        b                             ;[86c7] cb 10
                    exx                                     ;[86c9] d9
                    rl        c                             ;[86ca] cb 11
                    rla                                     ;[86cc] 17
                    exx                                     ;[86cd] d9
                    adc       hl,hl                         ;[86ce] ed 6a
                    exx                                     ;[86d0] d9
                    adc       hl,hl                         ;[86d1] ed 6a
                    exx                                     ;[86d3] d9
                    sbc       hl,de                         ;[86d4] ed 52
                    exx                                     ;[86d6] d9
                    sbc       hl,de                         ;[86d7] ed 52
                    jr        nc,loop_1                     ;[86d9] 30 05
                    exx                                     ;[86db] d9
                    add       hl,de                         ;[86dc] 19
                    exx                                     ;[86dd] d9
                    adc       hl,de                         ;[86de] ed 5a
loop_1:
                    ccf                                     ;[86e0] 3f
                    djnz      loop_0                        ;[86e1] 10 e1
                    exx                                     ;[86e3] d9
                    rl        c                             ;[86e4] cb 11
                    rl        b                             ;[86e6] cb 10
                    exx                                     ;[86e8] d9
                    rl        c                             ;[86e9] cb 11
                    rla                                     ;[86eb] 17
                    push      hl                            ;[86ec] e5
                    exx                                     ;[86ed] d9
                    pop       de                            ;[86ee] d1
                    push      bc                            ;[86ef] c5
                    exx                                     ;[86f0] d9
                    pop       hl                            ;[86f1] e1
                    ld        e,c                           ;[86f2] 59
                    ld        d,a                           ;[86f3] 57
                    ret                                     ;[86f4] c9

divide_zero:
                    dec       de                            ;[86f5] 1b
                    jp        error_divide_by_zero_mc       ;[86f6] c3 38 87
l_divu_64_64x8:
                    ld        a,c                           ;[86f9] 79
                    or        a                             ;[86fa] b7
                    jr        z,divide_by_zero              ;[86fb] 28 1c
l0_divu_64_64x8:
                    xor       a                             ;[86fd] af
                    ld        b,$40                         ;[86fe] 06 40
loop_11:
                    add       hl,hl                         ;[8700] 29
                    rl        e                             ;[8701] cb 13
                    rl        d                             ;[8703] cb 12
                    exx                                     ;[8705] d9
                    adc       hl,hl                         ;[8706] ed 6a
                    rl        e                             ;[8708] cb 13
                    rl        d                             ;[870a] cb 12
                    exx                                     ;[870c] d9
                    rla                                     ;[870d] 17
                    jr        c,loop_02                     ;[870e] 38 03
                    cp        c                             ;[8710] b9
                    jr        c,loop_03                     ;[8711] 38 02
loop_02:
                    sub       c                             ;[8713] 91
                    inc       l                             ;[8714] 2c
loop_03:
                    djnz      loop_11                       ;[8715] 10 e9
                    or        a                             ;[8717] b7
                    ret                                     ;[8718] c9

divide_by_zero:
                    call      error_llmc                    ;[8719] cd 4b 87
                    jp        error_divide_by_zero_mc       ;[871c] c3 38 87
                    pop       hl                            ;[871f] e1
                    pop       hl                            ;[8720] e1
                    pop       hl                            ;[8721] e1
error_einval_zc:
                    ld        l,$ff                         ;[8722] 2e ff
errno_zc:
                    ld        h,$00                         ;[8724] 26 00
                    ld        (_errno),hl                   ;[8726] 22 04 88
                    jp        error_zc                      ;[8729] c3 30 87
                    pop       hl                            ;[872c] e1
                    pop       hl                            ;[872d] e1
                    pop       hl                            ;[872e] e1
                    pop       hl                            ;[872f] e1
error_zc:
                    ld        hl,$0000                      ;[8730] 21 00 00
                    scf                                     ;[8733] 37
                    ret                                     ;[8734] c9

                    pop       hl                            ;[8735] e1
                    pop       hl                            ;[8736] e1
                    pop       hl                            ;[8737] e1
error_divide_by_zero_mc:
                    ld        l,$ff                         ;[8738] 2e ff
errno_mc:
                    ld        h,$00                         ;[873a] 26 00
                    ld        (_errno),hl                   ;[873c] 22 04 88
                    jp        error_mc                      ;[873f] c3 45 87
                    pop       hl                            ;[8742] e1
                    pop       hl                            ;[8743] e1
                    pop       hl                            ;[8744] e1
error_mc:
                    ld        hl,$ffff                      ;[8745] 21 ff ff
                    scf                                     ;[8748] 37
                    ret                                     ;[8749] c9

                    pop       hl                            ;[874a] e1
error_llmc:
                    exx                                     ;[874b] d9
                    call      error_lmc                     ;[874c] cd 54 87
                    exx                                     ;[874f] d9
                    jp        error_lmc                     ;[8750] c3 54 87
                    pop       hl                            ;[8753] e1
error_lmc:
                    ld        de,$ffff                      ;[8754] 11 ff ff
                    jp        error_mc                      ;[8757] c3 45 87
asm_atoi:
                    call      l_eat_ws                      ;[875a] cd df 80
asm0_atoi:
                    call      l_eat_sign                    ;[875d] cd d3 80
                    jr        nc,not_negative               ;[8760] 30 08
                    call      not_negative                  ;[8762] cd 6a 87
                    jp        nc,l_neg_hl                   ;[8765] d2 26 81
                    inc       hl                            ;[8768] 23
                    ret                                     ;[8769] c9

not_negative:
                    ex        de,hl                         ;[876a] eb
                    call      l_atou                        ;[876b] cd fe 80
                    jr        c,overflow_asm_atoi           ;[876e] 38 04
                    bit       7,h                           ;[8770] cb 7c
                    ret       z                             ;[8772] c8
                    scf                                     ;[8773] 37
overflow_asm_atoi:
                    ld        hl,$7fff                      ;[8774] 21 ff 7f
                    ret                                     ;[8777] c9

asm_ulltoa:
                    ld        a,ixh                         ;[8778] dd 7c
                    or        ixl                           ;[877a] dd b5
                    jp        z,error_zc                    ;[877c] ca 30 87
asm0_ulltoa:
                    call      l_valid_base                  ;[877f] cd f1 80
                    jp        nc,error_einval_zc            ;[8782] d2 22 87
asm1_ulltoa:
                    xor       a                             ;[8785] af
                    push      af                            ;[8786] f5
compute_lp:
                    push      bc                            ;[8787] c5
                    call      l0_divu_64_64x8               ;[8788] cd fd 86
                    pop       bc                            ;[878b] c1
                    call      l_num2char                    ;[878c] cd e7 80
                    scf                                     ;[878f] 37
                    push      af                            ;[8790] f5
                    call      l_testzero_64_dehldehl        ;[8791] cd c8 80
                    jr        nz,compute_lp                 ;[8794] 20 f1
                    push      ix                            ;[8796] dd e5
                    pop       hl                            ;[8798] e1
write_lp:
                    pop       af                            ;[8799] f1
                    ld        (hl),a                        ;[879a] 77
                    inc       hl                            ;[879b] 23
                    jr        c,write_lp                    ;[879c] 38 fb
                    dec       hl                            ;[879e] 2b
                    ret                                     ;[879f] c9

asm_strlen:
                    xor       a                             ;[87a0] af
                    ld        c,a                           ;[87a1] 4f
                    ld        b,a                           ;[87a2] 47
                    cpir                                    ;[87a3] ed b1
                    ld        hl,$ffff                      ;[87a5] 21 ff ff
                    sbc       hl,bc                         ;[87a8] ed 42
                    ret                                     ;[87aa] c9

i_1:
                    defb      $48                           ;[87ab] 48
                    defb      $65                           ;[87ac] 65
                    defb      $6c                           ;[87ad] 6c
                    defb      $6c                           ;[87ae] 6c
                    defb      $6f                           ;[87af] 6f
                    defb      $2c                           ;[87b0] 2c
                    defb      $20                           ;[87b1] 20
                    defb      $77                           ;[87b2] 77
                    defb      $6f                           ;[87b3] 6f
                    defb      $72                           ;[87b4] 72
                    defb      $6c                           ;[87b5] 6c
                    defb      $64                           ;[87b6] 64
                    defb      $21                           ;[87b7] 21
                    defb      $0a                           ;[87b8] 0a
                    defb      $28                           ;[87b9] 28
                    defb      $68                           ;[87ba] 68
                    defb      $69                           ;[87bb] 69
                    defb      $74                           ;[87bc] 74
                    defb      $20                           ;[87bd] 20
                    defb      $61                           ;[87be] 61
                    defb      $6e                           ;[87bf] 6e
                    defb      $79                           ;[87c0] 79
                    defb      $20                           ;[87c1] 20
                    defb      $6b                           ;[87c2] 6b
                    defb      $65                           ;[87c3] 65
                    defb      $79                           ;[87c4] 79
                    defb      $29                           ;[87c5] 29
                    defb      $0a                           ;[87c6] 0a
                    defb      $00                           ;[87c7] 00
__printf_format_table:
                    defb      $73                           ;[87c8] 73
                    defb      $a2                           ;[87c9] a2
                    defb      $84                           ;[87ca] 84
                    defb      $63                           ;[87cb] 63
                    defb      $30                           ;[87cc] 30
                    defb      $84                           ;[87cd] 84
                    defb      $64                           ;[87ce] 64
                    defb      $3c                           ;[87cf] 3c
                    defb      $84                           ;[87d0] 84
                    defb      $75                           ;[87d1] 75
                    defb      $ca                           ;[87d2] ca
                    defb      $84                           ;[87d3] 84
                    defb      $78                           ;[87d4] 78
                    defb      $cf                           ;[87d5] cf
                    defb      $84                           ;[87d6] 84
                    defb      $6f                           ;[87d7] 6f
                    defb      $99                           ;[87d8] 99
                    defb      $84                           ;[87d9] 84
                    defb      $70                           ;[87da] 70
                    defb      $cf                           ;[87db] cf
                    defb      $84                           ;[87dc] 84
                    defb      $58                           ;[87dd] 58
                    defb      $1f                           ;[87de] 1f
                    defb      $84                           ;[87df] 84
                    defb      $6e                           ;[87e0] 6e
                    defb      $88                           ;[87e1] 88
                    defb      $84                           ;[87e2] 84
                    defb      $42                           ;[87e3] 42
                    defb      $12                           ;[87e4] 12
                    defb      $84                           ;[87e5] 84
                    defb      $6c                           ;[87e6] 6c
                    defb      $41                           ;[87e7] 41
                    defb      $84                           ;[87e8] 84
                    defb      $00                           ;[87e9] 00
__printf_format_table64:
                    defb      $64                           ;[87ea] 64
                    defb      $68                           ;[87eb] 68
                    defb      $84                           ;[87ec] 84
                    defb      $75                           ;[87ed] 75
                    defb      $76                           ;[87ee] 76
                    defb      $84                           ;[87ef] 84
                    defb      $78                           ;[87f0] 78
                    defb      $7b                           ;[87f1] 7b
                    defb      $84                           ;[87f2] 84
                    defb      $6f                           ;[87f3] 6f
                    defb      $6d                           ;[87f4] 6d
                    defb      $84                           ;[87f5] 84
                    defb      $58                           ;[87f6] 58
                    defb      $57                           ;[87f7] 57
                    defb      $84                           ;[87f8] 84
                    defb      $42                           ;[87f9] 42
                    defb      $4a                           ;[87fa] 4a
                    defb      $84                           ;[87fb] 84
                    defb      $00                           ;[87fc] 00
nullstr:
                    defb      $28                           ;[87fd] 28
                    defb      $6e                           ;[87fe] 6e
                    defb      $75                           ;[87ff] 75
                    defb      $6c                           ;[8800] 6c
                    defb      $6c                           ;[8801] 6c
                    defb      $29                           ;[8802] 29
                    defb      $00                           ;[8803] 00
_errno:
                    defb      $00                           ;[8804] 00
                    defb      $00                           ;[8805] 00
__sgoioblk:
                    defb      $00                           ;[8806] 00
                    defb      $00                           ;[8807] 00
                    defb      $00                           ;[8808] 00
                    defb      $00                           ;[8809] 00
                    defb      $00                           ;[880a] 00
                    defb      $00                           ;[880b] 00
                    defb      $00                           ;[880c] 00
                    defb      $00                           ;[880d] 00
                    defb      $00                           ;[880e] 00
                    defb      $00                           ;[880f] 00
                    defb      $00                           ;[8810] 00
                    defb      $00                           ;[8811] 00
                    defb      $00                           ;[8812] 00
                    defb      $00                           ;[8813] 00
                    defb      $00                           ;[8814] 00
                    defb      $00                           ;[8815] 00
                    defb      $00                           ;[8816] 00
                    defb      $00                           ;[8817] 00
                    defb      $00                           ;[8818] 00
                    defb      $00                           ;[8819] 00
                    defb      $00                           ;[881a] 00
                    defb      $00                           ;[881b] 00
                    defb      $00                           ;[881c] 00
                    defb      $00                           ;[881d] 00
                    defb      $00                           ;[881e] 00
                    defb      $00                           ;[881f] 00
                    defb      $00                           ;[8820] 00
                    defb      $00                           ;[8821] 00
                    defb      $00                           ;[8822] 00
                    defb      $00                           ;[8823] 00
                    defb      $00                           ;[8824] 00
                    defb      $00                           ;[8825] 00
                    defb      $00                           ;[8826] 00
                    defb      $00                           ;[8827] 00
                    defb      $00                           ;[8828] 00
                    defb      $00                           ;[8829] 00
                    defb      $00                           ;[882a] 00
                    defb      $00                           ;[882b] 00
                    defb      $00                           ;[882c] 00
                    defb      $00                           ;[882d] 00
                    defb      $00                           ;[882e] 00
                    defb      $00                           ;[882f] 00
                    defb      $00                           ;[8830] 00
                    defb      $00                           ;[8831] 00
                    defb      $00                           ;[8832] 00
                    defb      $00                           ;[8833] 00
                    defb      $00                           ;[8834] 00
                    defb      $00                           ;[8835] 00
                    defb      $00                           ;[8836] 00
                    defb      $00                           ;[8837] 00
                    defb      $00                           ;[8838] 00
                    defb      $00                           ;[8839] 00
                    defb      $00                           ;[883a] 00
                    defb      $00                           ;[883b] 00
                    defb      $00                           ;[883c] 00
                    defb      $00                           ;[883d] 00
                    defb      $00                           ;[883e] 00
                    defb      $00                           ;[883f] 00
                    defb      $00                           ;[8840] 00
                    defb      $00                           ;[8841] 00
                    defb      $00                           ;[8842] 00
                    defb      $00                           ;[8843] 00
                    defb      $00                           ;[8844] 00
                    defb      $00                           ;[8845] 00
                    defb      $00                           ;[8846] 00
                    defb      $00                           ;[8847] 00
                    defb      $00                           ;[8848] 00
                    defb      $00                           ;[8849] 00
                    defb      $00                           ;[884a] 00
                    defb      $00                           ;[884b] 00
                    defb      $00                           ;[884c] 00
                    defb      $00                           ;[884d] 00
                    defb      $00                           ;[884e] 00
                    defb      $00                           ;[884f] 00
                    defb      $00                           ;[8850] 00
                    defb      $00                           ;[8851] 00
                    defb      $00                           ;[8852] 00
                    defb      $00                           ;[8853] 00
                    defb      $00                           ;[8854] 00
                    defb      $00                           ;[8855] 00
                    defb      $00                           ;[8856] 00
                    defb      $00                           ;[8857] 00
                    defb      $00                           ;[8858] 00
                    defb      $00                           ;[8859] 00
                    defb      $00                           ;[885a] 00
                    defb      $00                           ;[885b] 00
                    defb      $00                           ;[885c] 00
                    defb      $00                           ;[885d] 00
                    defb      $00                           ;[885e] 00
                    defb      $00                           ;[885f] 00
                    defb      $00                           ;[8860] 00
                    defb      $00                           ;[8861] 00
                    defb      $00                           ;[8862] 00
                    defb      $00                           ;[8863] 00
                    defb      $00                           ;[8864] 00
                    defb      $00                           ;[8865] 00
                    defb      $00                           ;[8866] 00
                    defb      $00                           ;[8867] 00
                    defb      $00                           ;[8868] 00
                    defb      $00                           ;[8869] 00
__sgoioblk_end:
                    defb      $00                           ;[886a] 00
                    defb      $00                           ;[886b] 00
__exit_atexit_count:
                    defb      $00                           ;[886c] 00
__exit_atexit_funcs:
                    defb      $00                           ;[886d] 00
                    defb      $00                           ;[886e] 00
                    defb      $00                           ;[886f] 00
