beanzee.asm:
     1                          include "../lib/beanzee.map"
../lib/beanzee.map:
     1                          BAD_CMD_MSG                     = $0236 ; addr, local, , beanzee, , asm/messages.asm:7
     2                          BEANBOARD                       = $0000 ; const, local, , beanzee, , beanzee.asm:5
     3                          CMD_BUFFER                      = $F020 ; const, local, , beanzee, , asm/main.inc:9
     4                          CMD_W_NULL_MSG                  = $024E ; addr, local, , beanzee, , asm/messages.asm:10
     5                          ESC_E                           = $001B ; const, local, , beanzee, , asm/escapestring.inc:9
     6                          ESC_N                           = $000A ; const, local, , beanzee, , asm/escapestring.inc:7
     7                          ESC_R                           = $000D ; const, local, , beanzee, , asm/escapestring.inc:8
     8                          ESC_T                           = $0009 ; const, local, , beanzee, , asm/escapestring.inc:6
     9                          MARVIN                          = $0072 ; addr, local, , beanzee, , asm/marvin.asm:9
    10                          PROMPT                          = $007B ; addr, local, , beanzee, , asm/marvin.asm:16
    11                          RAMSTART                        = $8000 ; const, local, , beanzee, , asm/main.inc:2
    12                          STACK                           = $FFFF ; const, local, , beanzee, , asm/main.inc:11
    13                          UM245R_CTRL                     = $0000 ; const, local, , beanzee, , asm/main.inc:13
    14                          UM245R_DATA                     = $0001 ; const, local, , beanzee, , asm/main.inc:14
    15                          WARMSTART                       = $0010 ; addr, local, , beanzee, , asm/main.asm:12
    16                          WELCOME_MSG                     = $01C7 ; addr, local, , beanzee, , asm/messages.asm:1
    17                          __head                          = $0000 ; const, public, def, , ,
    18                          __size                          = $0260 ; const, public, def, , ,
    19                          __tail                          = $0260 ; const, public, def, , ,
    20                          _cmd_exec_df                    = $0139 ; addr, local, , beanzee, , asm/marvin.asm:207
    21                          _cmd_execute                    = $0128 ; addr, local, , beanzee, , asm/marvin.asm:188
    22                          _cmd_load                       = $013D ; addr, local, , beanzee, , asm/marvin.asm:215
    23                          _cmd_load_data                  = $015C ; addr, local, , beanzee, , asm/marvin.asm:243
    24                          _cmd_load_end                   = $0169 ; addr, local, , beanzee, , asm/marvin.asm:262
    25                          _cmd_read                       = $00CD ; addr, local, , beanzee, , asm/marvin.asm:95
    26                          _cmd_read_byte                  = $00EE ; addr, local, , beanzee, , asm/marvin.asm:124
    27                          _cmd_read_row                   = $00DA ; addr, local, , beanzee, , asm/marvin.asm:110
    28                          _cmd_write                      = $0103 ; addr, local, , beanzee, , asm/marvin.asm:147
    29                          _cmd_write_data                 = $0110 ; addr, local, , beanzee, , asm/marvin.asm:162
    30                          _cmd_write_end                  = $011C ; addr, local, , beanzee, , asm/marvin.asm:176
    31                          _cmd_write_null                 = $011F ; addr, local, , beanzee, , asm/marvin.asm:179
    32                          _do_usb_put                     = $0052 ; addr, local, , beanzee, , asm/UM245R.asm:44
    33                          _get_cmd                        = $0083 ; addr, local, , beanzee, , asm/marvin.asm:22
    34                          _get_cmd_end                    = $00A8 ; addr, local, , beanzee, , asm/marvin.asm:60
    35                          _get_cmd_esc                    = $00A1 ; addr, local, , beanzee, , asm/marvin.asm:54
    36                          _hex_byte_val_zero              = $018B ; addr, local, , beanzee, , asm/strings.asm:40
    37                          _hex_val_n                      = $019D ; addr, local, , beanzee, , asm/strings.asm:64
    38                          _hex_val_u_n                    = $0196 ; addr, local, , beanzee, , asm/strings.asm:56
    39                          _putchar_hex_dgt                = $01B7 ; addr, local, , beanzee, , asm/strings.asm:91
    40                          _putchar_hex_n                  = $01C1 ; addr, local, , beanzee, , asm/strings.asm:101
    41                          _puts_end                       = $0034 ; addr, local, , beanzee, , asm/console.asm:88
    42                          _puts_loop                      = $0028 ; addr, local, , beanzee, , asm/console.asm:75
    43                          _usb_no_char                    = $0044 ; addr, local, , beanzee, , asm/UM245R.asm:32
    44                          _usb_put                        = $0056 ; addr, local, , beanzee, , asm/UM245R.asm:49
    45                          _usb_put_loop                   = $0058 ; addr, local, , beanzee, , asm/UM245R.asm:53
    46                          _usb_puts_end                   = $0070 ; addr, local, , beanzee, , asm/UM245R.asm:83
    47                          _usb_puts_loop                  = $0064 ; addr, local, , beanzee, , asm/UM245R.asm:70
    48                          getchar                         = $0013 ; addr, local, , beanzee, , asm/console.asm:2
    49                          hex_byte_val                    = $016C ; addr, local, , beanzee, , asm/strings.asm:4
    50                          hex_val                         = $018F ; addr, local, , beanzee, , asm/strings.asm:48
    51                          putchar                         = $001F ; addr, local, , beanzee, , asm/console.asm:63
    52                          putchar_hex                     = $01A0 ; addr, local, , beanzee, , asm/strings.asm:70
    53                          puts                            = $0027 ; addr, local, , beanzee, , asm/console.asm:73
    54                          readchar                        = $001B ; addr, local, , beanzee, , asm/console.asm:30
    55                          usb_putchar                     = $0047 ; addr, local, , beanzee, , asm/UM245R.asm:36
    56                          usb_puts                        = $0063 ; addr, local, , beanzee, , asm/UM245R.asm:68
    57                          usb_readchar                    = $0036 ; addr, local, , beanzee, , asm/UM245R.asm:16
    58                          
beanzee.asm:
     2                          ORG ORGDEF
     3                          include "main.asm"
main.asm:
     1                          start:
     2                              ; load the message address into HL
     3  0000  210c00                ld hl,message
     4                          print:
     5                              ; call the monitor puts routine, which will print the message pointed to by HL
     6  0003  cd2700                call puts
     7                          wait:
     8                              ; call the monitor getchar to get a character from the console input
     9                              ; it will wait until a character is received
    10  0006  cd1300                call getchar
    11                          end:
    12                              ; jump to the reset address - will jump back to the monitor
    13  0009  c31000                jp WARMSTART
    14                          
    15                          message:
    16                              ; message to be printed
    17                              ; must be terminated by a 0
    18  000c  48656c6c6f20776f      db "Hello world!\n"
              726c64210a        
    19  0019  2868697420616e79      db "(hit any key)\n",0
              206b6579290a00    
    20                          
beanzee.asm:
     4                          
